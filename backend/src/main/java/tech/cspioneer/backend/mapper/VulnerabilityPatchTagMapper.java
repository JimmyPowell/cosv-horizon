package tech.cspioneer.backend.mapper;

import org.apache.ibatis.annotations.*;
import tech.cspioneer.backend.entity.VulnerabilityPatchTag;

import java.util.List;

@Mapper
public interface VulnerabilityPatchTagMapper {

    @Insert("INSERT INTO vulnerability_metadata_patch_tag(patch_detail_id, name) VALUES(#{patchDetailId}, #{name})")
    @Options(useGeneratedKeys = true, keyProperty = "id")
    int insert(VulnerabilityPatchTag e);

    @Select("SELECT id, patch_detail_id AS patchDetailId, name FROM vulnerability_metadata_patch_tag WHERE patch_detail_id = #{patchDetailId} ORDER BY id")
    List<VulnerabilityPatchTag> listByPatchDetailId(@Param("patchDetailId") Long patchDetailId);

    @Delete("DELETE FROM vulnerability_metadata_patch_tag WHERE patch_detail_id = #{patchDetailId}")
    int deleteByPatchDetailId(@Param("patchDetailId") Long patchDetailId);
}

